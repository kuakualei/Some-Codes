# B 题

这题主要还是靠我 dg 带。无脑贪心。

但是贪心理论的证明就有一点不好说额。下面尝试证明一下吧。

## 问题描述、规定

||||
|-|-|-|
|1|2|3|
|4|5|6|
|7|8|9|


由于运动的只能往左/上，我们可以把9的问题规约到 8 或 6。他们可以继续被规约为更小的情况。现在我们来证明最小的情况，即1、2、4、5。

显然，对于每一个格子，必有且仅有一个方向的价值被加入总收益。

我们约定，把格子 i 到左边的价值为 l<sub>i</sub>, 到上边的价值为 u<sub>i</sub>。

我们要证明的是，对于每一个格子 i ，如果 l<sub>i</sub> > u<sub>i</sub>，则应把 i 的价值向左转移一个格子；如果 l<sub>i</sub> < u<sub>i</sub>，则应把 i 的价值向上转移一个格子；如果 l<sub>i</sub> = u<sub>i</sub>，则 i 的转移策略不影响结果。这里的 l<sub>i</sub> 和 u<sub>i</sub> 全部指的是它右下方的格子的价值全部被转移后，它的新的价值。

## 最简单的情形：一个格子

||
|-|
1

先从 1 说起。如果只有一个格子，决策是很简单的：如果 l<sub>1</sub> > u<sub>1</sub>，则向左，反之则向上。如果 l<sub>1</sub> = u<sub>1</sub>，则决策不影响结果。

## 左边界的决策

||
|-|
|1|
|4|

然后是 1 和 4。显然，如果 l<sub>4</sub> > u<sub>4</sub>，则 4 一定向左。  
如果 l<sub>4</sub> < u<sub>4</sub>，考虑向上的收益：  
a) 如果 4 的价值全部转移给 1，1+4 的价值是 l<sub>1+4</sub> > u<sub>1+4</sub> 的，则应该向左，这与直接向左等价；  
b) 如果转移以后 l<sub>1+4</sub> < u<sub>1+4</sub>，则向上，4的价值最终是向上的，这样的收益大于把 4 向左运。  
c) 如果 l<sub>4</sub> = u<sub>4</sub>，则决策不影响结果，因为 4 必有且仅有一个方向的价值被加入总收益，往哪边的收益值都一样。  
综合三点可以看出，无论 1+4 的价值情况如何，4 往上运还是往左运完全取决于 4 本身的 l<sub>4</sub> 和 u<sub>4</sub> 的。

## 上边界的决策

|||
|-|-|
|1|2|

这种情况同 1、4 的情况。

## 非边界的决策

上面讨论了最左上角的情况和上边界、左边界的情况。现在如果能证明非左、上边界的点的价值转移策略和上面的情况一样（只由其自身决定），则可以证明贪心是成立的。

|||
|-|-|
|1|2|
|4|5|

考虑 l<sub>5</sub> > u<sub>5</sub> 的情况。如果往左运，则会出现 l<sub>4+5</sub> > u<sub>4+5</sub>, l<sub>4+5</sub> < u<sub>4+5</sub> 和 l<sub>4+5</sub> = u<sub>4+5</sub> 三种情况。

a) 如果 l<sub>4+5</sub> > u<sub>4+5</sub>，按前面“左边界的决策”，应该向左。此时 4 和 5 都取到了 l 值。  
由于 l<sub>4+5</sub> > u<sub>4+5</sub>，即l<sub>4</sub> + l<sub>5</sub> > u<sub>4</sub> + u<sub>5</sub>，移项可得l<sub>5</sub> - u<sub>5</sub> > u<sub>4</sub> - l<sub>4</sub>，即 5 向左移较向上移得到的收益增幅大于 4 向上移较向左移得到的收益，对于 4、5，向左移带来局部最优解。  
而该决策与格子 1、2 本身无关，1、2 会按前面讨论的“上边界的决策”取得他们的最大值，故总体取得了最大值。  

b) 如果 l<sub>4+5</sub> < u<sub>4+5</sub>，按前面“左边界的决策”，应该向上。此时 4 和 5 都取到了 u 值。  
由于 l<sub>4+5</sub> < u<sub>4+5</sub>，即l<sub>4</sub> + l<sub>5</sub> < u<sub>4</sub> + u<sub>5</sub>，移项可得 u<sub>4</sub> - l<sub>4</sub> > l<sub>5</sub> - u<sub>5</sub> > 0，即 4 向上移较向左移得到的收益增幅大于 5 向左移较向上移得到的收益，对于 4、5，向左移带来局部最优解。  
4、5的价值转移给 1 格子后，1、2的价值讨论同前面“上边界的决策”。如果最终 5 的价值可能向上，但是 4 取得了较大值，这带来的收益是不小于 5 直接向上走的。之所以说不小于，是因为，显然地，最优的转移路径可能不只有一种。

c) 对于l<sub>4+5</sub> = u<sub>4+5</sub> 的情况讨论和 b) 类似， 4 向上移较向左移得到的收益增幅等于 5 向左移较向上移得到的收益，此时转移的方向不影响最终总收益。

综上三点，当 l<sub>5</sub> > u<sub>5</sub> 时，5 格子的价值向左转移会带来最优解。同理，当 l<sub>5</sub> < u<sub>5</sub> 时，5 格子的价值向上转移会带来最优解；当l<sub>5</sub> = u<sub>5</sub> 时，5 格子的策略不影响总收益。

## 结尾

证明了这 4 种情况以后可以发现，1、4、7可以被“左边界的决策”规约到1、4的情况；1、2、4、5、7、8 可以通过“非边界的决策” 规约为 1、2、4、5 的情况或 1、4、7的情况；1、2、3、4、5、6、7、8、9 可以规约到 1、2、4、5、7、8 或 1、2、3、4、5、6 的情况。并且，更大的格子也能通过同样的方法能够被规约到更小的格子。因此，这种贪心是正确的。

## 后记

码字比写题累多了awsl。  
![流血滑稽](http://i1.hdslb.com/bfs/face/5a5d42a4af009461646b2d2302c14c54861f6024.jpg)