# N题

农夫带狼羊菜过河的升级版。

因为n<=15, 每个物体只有两种状态，显然要状压。

然而这个题，转移方程额，不会写，O((2^n)^2) 的复杂度好像会炸。所以不知道怎么写。但是，公布题解的时候提到，由于大多数状态不合法，所以实际上的复杂度会低得多。（但问题是，如果 n = 15, m = 1, 复杂度就炸了，出题人有一点不严密，应该保证 m 足够大，如 `n <= 2m` ）

大概就是3步走：

1. 判断 status 的合法性

    status 为非法状态的充要条件：`(a&&b && (!jj)) || ((!a) && (!b) && jj)`，其中 jj 是姐姐，a 和 b 是一对CP。

2. 遍历判断合法的 status 间是否能够转移，对于合法的，在两 status 间建立双向边，权重为转移需要的体力值  

    状态转移：对于状态 A 和 B， det = A^B，合法转移为：  

    1. det 末位为 1， det 中 1 的数量 <= k
    2. max(A,B) - det = min(A,B)

3. 用 Dijkstra 跑一遍最短路，就是答案。

由此也可以看出，状压后问题不一定转化成 dp，也可能是一个图。
